{"version":3,"file":"platform-content.bundle.js","mappings":"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","sources":["webpack://ai-content-assistant/./src/platforms/implementations/chatgpt-platform.js","webpack://ai-content-assistant/./src/platforms/implementations/claude-platform.js","webpack://ai-content-assistant/./src/platforms/implementations/deepseek-platform.js","webpack://ai-content-assistant/./src/platforms/implementations/gemini-platform.js","webpack://ai-content-assistant/./src/platforms/implementations/grok-platform.js","webpack://ai-content-assistant/./src/platforms/implementations/mistral-platform.js","webpack://ai-content-assistant/./src/platforms/platform-base.js","webpack://ai-content-assistant/./src/platforms/platform-factory.js","webpack://ai-content-assistant/./src/platforms/platform-interface.js","webpack://ai-content-assistant/./src/shared/constants.js","webpack://ai-content-assistant/./src/shared/logger.js","webpack://ai-content-assistant/./src/shared/utils/message-utils.js","webpack://ai-content-assistant/webpack/bootstrap","webpack://ai-content-assistant/webpack/runtime/compat get default export","webpack://ai-content-assistant/webpack/runtime/define property getters","webpack://ai-content-assistant/webpack/runtime/hasOwnProperty shorthand","webpack://ai-content-assistant/webpack/runtime/make namespace object","webpack://ai-content-assistant/./src/content/platform-content.js"],"sourcesContent":["// src/platforms/implementations/chatgpt-platform.js\nconst BasePlatform = require('../platform-base');\n\n/**\n * ChatGPT AI platform implementation\n */\nclass ChatGptPlatform extends BasePlatform {\n  constructor() {\n    super('chatgpt');\n  }\n\n  /**\n   * Check if the current page is ChatGPT\n   * @returns {boolean} True if on ChatGPT\n   */\n  isCurrentPlatform() {\n    return window.location.href.includes('chatgpt.com');\n  }\n\n  /**\n   * Find ChatGPT's editor element (the contenteditable div)\n   * @returns {HTMLElement|null} The editor element or null if not found\n   */\n  findEditorElement() {\n    this.logger.info(`[${this.platformId}] Attempting to find editor element (#prompt-textarea)...`);\n    // The div now has the ID\n    const editor = document.querySelector('div#prompt-textarea[contenteditable=\"true\"]');\n    if (!editor) {\n        this.logger.warn(`[${this.platformId}] Editor element (div#prompt-textarea) not found.`);\n    } else {\n        this.logger.info(`[${this.platformId}] Found editor element (div#prompt-textarea).`);\n    }\n    return editor;\n  }\n\n  /**\n   * Find ChatGPT's submit button using ID and data-testid.\n   * @returns {HTMLElement|null} The submit button or null if not found\n   */\n  findSubmitButton() {\n    // This method remains the same as the previous version, targeting the final button state\n    this.logger.info(`[${this.platformId}] Attempting to find submit button (post-wait/text insertion)...`);\n    let button = null;\n\n    // Strategy 1: Find by ID\n    button = document.querySelector('#composer-submit-button');\n    if (button) {\n      this.logger.info(`[${this.platformId}] Found button using ID #composer-submit-button.`);\n      return button;\n    }\n\n    // Strategy 2: Find by data-testid\n    button = document.querySelector('button[data-testid=\"send-button\"]');\n    if (button) {\n      this.logger.info(`[${this.platformId}] Found button using data-testid=\"send-button\".`);\n      return button;\n    }\n\n    // Strategy 3: Find by aria-label\n    const ariaSelector = 'button[aria-label*=\"Send\" i], button[aria-label*=\"Envoyer\" i]';\n    button = document.querySelector(ariaSelector);\n     if (button) {\n      this.logger.info(`[${this.platformId}] Found button using aria-label.`);\n      return button;\n    }\n\n    this.logger.error(`[${this.platformId}] Submit button not found using any strategy (ID, data-testid, aria-label).`);\n    return null;\n  }\n\n  /**\n   * Override: Insert text into ChatGPT's contenteditable div editor.\n   * @param {HTMLElement} editorElement - The editor element (div#prompt-textarea).\n   * @param {string} text - The text to insert.\n   * @returns {Promise<boolean>} - True if successful, false otherwise.\n   * @protected\n   */\n  async _insertTextIntoEditor(editorElement, text) {\n    try {\n      this.logger.info(`[${this.platformId}] Inserting text into ChatGPT contenteditable editor`);\n\n      // 1. Focus the editor element\n      editorElement.focus();\n\n      // 2. Clear existing content (usually a <p><br></p> or similar placeholder)\n      editorElement.innerHTML = '';\n\n      // 3. Create and append paragraphs for each line of text\n      const lines = text.split('\\n');\n      lines.forEach((line) => {\n        const p = document.createElement('p');\n        // Use textContent to prevent HTML injection issues\n        // Use non-breaking space for empty lines to maintain structure in contenteditable\n        p.textContent = line || '\\u00A0';\n        editorElement.appendChild(p);\n      });\n\n      // 4. Dispatch events to notify the framework (React) of the change\n      // 'input' is crucial for React state updates in contenteditable\n      this._dispatchEvents(editorElement, ['input', 'change']);\n\n      this.logger.info(`[${this.platformId}] Successfully inserted text into contenteditable editor.`);\n      return true;\n    } catch (error) {\n      this.logger.error(`[${this.platformId}] Error inserting text into contenteditable editor:`, error);\n      return false;\n    }\n  }\n\n  /**\n   * Override: Click ChatGPT's submit button using a more robust event sequence.\n   * Includes pre-click check for disabled state.\n   * @param {HTMLElement} buttonElement - The submit button element.\n   * @returns {Promise<boolean>} - True if successful, false otherwise.\n   * @protected\n   */\n  async _clickSubmitButton(buttonElement) {\n    try {\n      this.logger.info(`[${this.platformId}] Attempting to click submit button for ChatGPT with event sequence`);\n      if (buttonElement.disabled || buttonElement.getAttribute('aria-disabled') === 'true') {\n        this.logger.warn(`[${this.platformId}] Submit button is disabled right before click attempt.`);\n        return false;\n      }\n      this.logger.info(`[${this.platformId}] Dispatching click events sequence.`);\n      ['mousedown', 'mouseup', 'click'].forEach(eventType => {\n        const event = new MouseEvent(eventType, {\n          view: window,\n          bubbles: true,\n          cancelable: true,\n          buttons: eventType === 'mousedown' ? 1 : 0\n        });\n        buttonElement.dispatchEvent(event);\n      });\n      this.logger.info(`[${this.platformId}] Successfully dispatched click events.`);\n      return true;\n    } catch (error) {\n      this.logger.error(`[${this.platformId}] Failed to click submit button:`, error);\n      return false;\n    }\n  }\n}\n\nmodule.exports = ChatGptPlatform;","// src/platforms/implementations/claude-platform.js\nconst BasePlatform = require('../platform-base');\n\n/**\n * Claude AI platform implementation\n */\nclass ClaudePlatform extends BasePlatform {\n  constructor() {\n    super('claude');\n  }\n\n  /**\n   * Check if the current page is Claude\n   * @returns {boolean} True if on Claude\n   */\n  isCurrentPlatform() {\n    return window.location.href.includes('claude.ai');\n  }\n\n\n  /**\n * Helper method to determine if an element is visible and interactive\n * @param {HTMLElement} element - The element to check\n * @returns {boolean} True if the element is visible and interactive\n */\n  isVisibleElement(element) {\n    if (!element) return false;\n    const style = window.getComputedStyle(element);\n    const rect = element.getBoundingClientRect();\n    return style.display !== 'none' &&\n            style.visibility !== 'hidden' &&\n            style.opacity !== '0' &&\n            element.getAttribute('aria-hidden') !== 'true' &&\n            rect.width > 0 && rect.height > 0; // Check for actual dimensions\n  }\n\n  /**\n   * Find Claude's editor element using more robust strategies.\n   * @returns {HTMLElement|null} The editor element or null if not found\n   */\n  findEditorElement() {\n    this.logger.info(`[${this.platformId}] Attempting to find editor element...`);\n\n    // Strategy 1: Look for contenteditable inside the known wrapper\n    try {\n      const wrapper = document.querySelector('div[aria-label*=\"Claude\"]'); // Find wrapper by aria-label\n      if (wrapper) {\n        const editor = wrapper.querySelector('div[contenteditable=\"true\"].ProseMirror');\n        if (editor && this.isVisibleElement(editor)) {\n          this.logger.info(`[${this.platformId}] Found editor using Strategy 1 (Wrapper + Contenteditable)`);\n          return editor;\n        }\n      }\n    } catch (e) { this.logger.warn(`[${this.platformId}] Error during Strategy 1 editor search:`, e); }\n\n    // Strategy 2: Look for contenteditable containing the placeholder paragraph\n    try {\n      // Use partial match for placeholder text to handle language variations\n      const placeholderParagraph = document.querySelector('p[data-placeholder*=\"Claude\"]');\n      if (placeholderParagraph) {\n        const editor = placeholderParagraph.closest('div[contenteditable=\"true\"].ProseMirror');\n        if (editor && this.isVisibleElement(editor)) {\n          this.logger.info(`[${this.platformId}] Found editor using Strategy 2 (Placeholder Parent)`);\n          return editor;\n        }\n      }\n    } catch (e) { this.logger.warn(`[${this.platformId}] Error during Strategy 2 editor search:`, e); }\n\n    // Strategy 3: Find the most prominent contenteditable div\n    try {\n      const editors = document.querySelectorAll('div[contenteditable=\"true\"].ProseMirror');\n      // Find the first one that's visible (usually the main input)\n      for (const editor of editors) {\n        if (this.isVisibleElement(editor)) {\n          this.logger.info(`[${this.platformId}] Found editor using Strategy 3 (Visible Contenteditable)`);\n          return editor;\n        }\n      }\n    } catch (e) { this.logger.warn(`[${this.platformId}] Error during Strategy 3 editor search:`, e); }\n\n\n    this.logger.error(`[${this.platformId}] Editor element not found using any strategy.`);\n    return null;\n  }\n\n  /**\n   * Helper method to determine if an element is visible and interactive\n   * @param {HTMLElement} element - The element to check\n   * @returns {boolean} True if the element is visible and interactive\n   */\n  isVisibleElement(element) {\n    if (!element) return false;\n    const style = window.getComputedStyle(element);\n    const rect = element.getBoundingClientRect();\n    const isVisible = style.display !== 'none' &&\n      style.visibility !== 'hidden' &&\n      style.opacity !== '0' &&\n      element.getAttribute('aria-hidden') !== 'true' &&\n      rect.width > 0 && rect.height > 0;\n\n    if (!isVisible) {\n        this.logger.debug(`[${this.platformId}] Element failed visibility check:`, { element, style, rect });\n    }\n    return isVisible;\n  }\n\n  /**\n   * Check if a button element is currently enabled and ready for interaction.\n   * @param {HTMLElement} button - The button element to check.\n   * @returns {boolean} True if the button is enabled, false otherwise.\n   * @private\n   */\n  _isButtonEnabled(button) {\n    if (!button) return false;\n    const isDisabled = button.disabled || button.getAttribute('aria-disabled') === 'true';\n    if (isDisabled) {\n        this.logger.debug(`[${this.platformId}] Button is disabled:`, button);\n    }\n    return !isDisabled;\n  }\n\n  /**\n   * Find Claude's submit button using more robust strategies.\n   * Checks for visibility and enabled state.\n   * @returns {HTMLElement|null} The submit button or null if not found\n   */\n  findSubmitButton() {\n    this.logger.info(`[${this.platformId}] Attempting to find submit button using selector...`);\n\n    // Strategy: Find button by aria-label containing \"message\" (case-insensitive) that has an SVG inside\n    const selector = 'button[aria-label*=\"message\" i] svg';\n    let button = null;\n\n    try {\n      const svgElement = document.querySelector(selector);\n      if (svgElement) {\n        button = svgElement.closest('button');\n      }\n    } catch (e) {\n      this.logger.warn(`[${this.platformId}] Error during submit button search:`, e);\n      return null;\n    }\n\n    // Check if the button was found and if it's ready\n    if (button && this._isButtonEnabled(button) && this.isVisibleElement(button)) {\n      this.logger.info(`[${this.platformId}] Found valid submit button using selector.`);\n      return button;\n    } else if (button) {\n      // Log why it wasn't returned (disabled or hidden)\n      this.logger.warn(`[${this.platformId}] Found button element with selector, but it's not enabled or visible.`, {\n          isDisabled: !this._isButtonEnabled(button),\n          isHidden: !this.isVisibleElement(button),\n          element: button\n      });\n      return null; // Return null if found but not ready\n    } else {\n      this.logger.warn(`[${this.platformId}] Submit button not found using selector (${selector}).`);\n      return null;\n    }\n  }\n\n  /**\n   * Override: Insert text into Claude's contenteditable editor.\n   * @param {HTMLElement} editorElement - The editor element.\n   * @param {string} text - The text to insert.\n   * @returns {Promise<boolean>} - True if successful, false otherwise.\n   * @protected\n   */\n  async _insertTextIntoEditor(editorElement, text) {\n    try {\n      this.logger.info(`[${this.platformId}] Inserting text into Claude editor`);\n      // Clear existing content\n      editorElement.innerHTML = '';\n\n      // Split the text into lines and create paragraphs\n      const lines = text.split('\\n');\n\n      lines.forEach((line, index) => {\n        const p = document.createElement('p');\n        // Use textContent to prevent potential XSS if text contained HTML\n        p.textContent = line || '\\u00A0'; // Use non-breaking space for empty lines to maintain structure\n        editorElement.appendChild(p);\n\n        // Add a line break element between paragraphs for visual spacing if needed by Claude's editor\n        // if (index < lines.length - 1) {\n        //   editorElement.appendChild(document.createElement('br'));\n        // }\n      });\n\n      // Remove common empty state classes (might not be strictly necessary after setting innerHTML)\n      editorElement.classList.remove('is-empty', 'is-editor-empty');\n\n      // Trigger input event using the base class helper\n      this._dispatchEvents(editorElement, ['input']);\n\n      // Try to focus the editor\n      try {\n        editorElement.focus();\n      } catch (focusError) {\n        this.logger.warn(`[${this.platformId}] Could not focus Claude editor:`, focusError);\n        // Continue anyway, focus might not be critical\n      }\n\n      this.logger.info(`[${this.platformId}] Successfully inserted text into Claude editor.`);\n      return true;\n    } catch (error) {\n      this.logger.error(`[${this.platformId}] Error inserting text into Claude editor:`, error);\n      return false;\n    }\n  }\n\n  /**\n   * Override: Click Claude's submit button using a more robust event sequence.\n   * @param {HTMLElement} buttonElement - The submit button element.\n   * @returns {Promise<boolean>} - True if successful, false otherwise.\n   * @protected\n   */\n  async _clickSubmitButton(buttonElement) {\n    try {\n      this.logger.info(`[${this.platformId}] Attempting to click submit button for Claude with event sequence`);\n      if (buttonElement.disabled || buttonElement.getAttribute('aria-disabled') === 'true') {\n        // Attempt to enable if possible, otherwise warn\n        if (buttonElement.hasAttribute('disabled')) {\n           this.logger.warn(`[${this.platformId}] Submit button is disabled, attempting to enable.`);\n           buttonElement.disabled = false;\n        } else {\n           this.logger.warn(`[${this.platformId}] Submit button is aria-disabled.`);\n           // Cannot directly change aria-disabled usually, proceed but might fail\n        }\n        // Re-check after attempting to enable\n        if (buttonElement.disabled || buttonElement.getAttribute('aria-disabled') === 'true') {\n            this.logger.error(`[${this.platformId}] Submit button remains disabled.`);\n            return false;\n        }\n      }\n\n      // Create and dispatch multiple events for better compatibility\n      ['mousedown', 'mouseup', 'click'].forEach(eventType => {\n        const event = new MouseEvent(eventType, {\n          view: window,\n          bubbles: true,\n          cancelable: true,\n          buttons: eventType === 'mousedown' ? 1 : 0 // Set buttons only for mousedown\n        });\n        buttonElement.dispatchEvent(event);\n      });\n\n      this.logger.info(`[${this.platformId}] Successfully clicked submit button.`);\n      return true;\n    } catch (error) {\n      this.logger.error(`[${this.platformId}] Failed to click submit button:`, error);\n      return false;\n    }\n  }\n}\n\nmodule.exports = ClaudePlatform;","// src/platforms/implementations/deepseek-platform.js\nconst BasePlatform = require('../platform-base');\n\n/**\n * DeepSeek AI platform implementation\n */\nclass DeepSeekPlatform extends BasePlatform {\n  constructor() {\n    super('deepseek');\n  }\n\n  /**\n   * Check if the current page is DeepSeek\n   * @returns {boolean} True if on DeepSeek\n   */\n  isCurrentPlatform() {\n    return window.location.href.includes('chat.deepseek.com');\n  }\n\n  /**\n   * Find DeepSeek's editor element\n   * @returns {HTMLElement|null} The editor element or null if not found\n   */\n  findEditorElement() {\n    // Keep existing selectors with fallbacks\n    return document.querySelector('#chat-input') ||\n           document.querySelector('.c92459f0');\n  }\n\n  /**\n   * Find DeepSeek's submit button with enhanced selector resilience\n   * @returns {HTMLElement|null} The submit button or null if not found\n   */\n  findSubmitButton() {\n    // Primary selectors - target specific UI patterns unique to the send button\n    const sendButton =\n\n      // Target by class combinations (current approach with additions)\n      document.querySelector('div[role=\"button\"]._7436101.bcc55ca1') ||\n      document.querySelector('div[role=\"button\"]._7436101') ||\n      document.querySelector('div[role=\"button\"] ._6f28693')?.closest('div[role=\"button\"]') ||\n\n      // Position-based fallbacks (rightmost button in the input container)\n      document.querySelector('.ec4f5d61 > div[role=\"button\"]:last-child') ||\n      document.querySelector('.bf38813a > div:last-child > div[role=\"button\"]') ||\n\n      // Attribute-based fallbacks\n      document.querySelector('div[role=\"button\"][aria-disabled]') ||\n\n      // Icon-based detection\n      document.querySelector('div[role=\"button\"] .ds-icon svg[width=\"14\"][height=\"16\"]')?.closest('div[role=\"button\"]') ||\n\n      // Original fallbacks\n      document.querySelector('div[role=\"button\"].f6d670.bcc55ca1') ||\n      document.querySelector('div[role=\"button\"].f6d670');\n\n    return sendButton;\n  }\n\n  /**\n   * Insert text into DeepSeek's editor and submit\n   * @param {string} text - The text to insert\n   * @returns {Promise<boolean>} Success status\n   */\n  async insertAndSubmitText(text) {\n    const editorElement = this.findEditorElement();\n\n    if (!editorElement) {\n      this.logger.error(`[${this.platformId}] Textarea element not found`);\n      return false;\n    }\n\n    try {\n      // Focus on the textarea\n      editorElement.focus();\n\n      // Set the value directly\n      editorElement.value = text;\n\n      // Trigger input event to activate the UI\n      const inputEvent = new Event('input', { bubbles: true });\n      editorElement.dispatchEvent(inputEvent);\n\n      // Wait a short moment for the UI to update\n      return new Promise(resolve => {\n        setTimeout(() => {\n          // Look for the send button\n          const sendButton = this.findSubmitButton();\n\n          if (!sendButton) {\n            // Enhanced logging to help troubleshoot button selector issues\n            this.logger.error(`[${this.platformId}] Send button not found. DOM structure may have changed.`);\n            this.logger.info(`[${this.platformId}] Available button elements:`,\n              document.querySelectorAll('div[role=\"button\"]').length);\n            resolve(false);\n            return;\n          }\n\n          // Check if button is disabled\n          const isDisabled = sendButton.getAttribute('aria-disabled') === 'true';\n\n          if (isDisabled) {\n            this.logger.warn(`[${this.platformId}] Send button is currently disabled`);\n            // Try enabling the button by triggering another input event\n            editorElement.dispatchEvent(inputEvent);\n\n            // Wait a bit more and try again\n            setTimeout(() => {\n              const updatedButton = this.findSubmitButton();\n\n              if (updatedButton && updatedButton.getAttribute('aria-disabled') !== 'true') {\n                updatedButton.click();\n                this.logger.info(`[${this.platformId}] Text submitted successfully after enabling button`);\n                resolve(true);\n              } else {\n                this.logger.error(`[${this.platformId}] Send button remained disabled after retry`);\n                resolve(false);\n              }\n            }, 300);\n          } else {\n            // Click the send button if it's not disabled\n            sendButton.click();\n            this.logger.info(`[${this.platformId}] Text submitted successfully`);\n            resolve(true);\n          }\n        }, 500);\n      });\n    } catch (error) {\n      this.logger.error(`[${this.platformId}] Error inserting text:`, error);\n      return false;\n    }\n  }\n  // No override needed for _insertTextIntoEditor - default implementation works\n  // No override needed for _clickSubmitButton - default implementation works\n}\n\nmodule.exports = DeepSeekPlatform;","// src/platforms/implementations/gemini-platform.js\nconst BasePlatform = require('../platform-base');\n\nclass GeminiPlatform extends BasePlatform {\n  constructor() {\n    super('gemini');\n  }\n\n  isCurrentPlatform() {\n    return window.location.hostname.includes('gemini.google.com');\n  }\n\n  findEditorElement() {\n    // Exact selector based on provided HTML\n    return document.querySelector('div.ql-editor[contenteditable=\"true\"][aria-multiline=\"true\"]');\n  }\n\n  findSubmitButton() {\n    // Exact selector based on provided HTML\n    return document.querySelector('button.send-button');\n  }\n\n  /**\n   * Override: Insert text into Gemini's contenteditable editor (Quill).\n   * @param {HTMLElement} editorElement - The editor element (div.ql-editor).\n   * @param {string} text - The text to insert.\n   * @returns {Promise<boolean>} - True if successful, false otherwise.\n   * @protected\n   */\n  async _insertTextIntoEditor(editorElement, text) {\n    try {\n      this.logger.info(`[${this.platformId}] Inserting text into Gemini editor (Quill)`);\n      // Focus the editor\n      editorElement.focus();\n\n      // Clear existing content and set new content\n      editorElement.innerHTML = '';\n\n      // Create paragraph for each line\n      const paragraphs = text.split('\\n');\n      paragraphs.forEach(paragraph => {\n        const p = document.createElement('p');\n        if (paragraph.trim()) {\n          p.textContent = paragraph;\n        } else {\n          // Empty paragraph with br for line breaks\n          p.appendChild(document.createElement('br'));\n        }\n        editorElement.appendChild(p);\n      });\n\n      // Remove placeholder class if present\n      if (editorElement.classList.contains('ql-blank')) {\n        editorElement.classList.remove('ql-blank');\n      }\n\n      // Trigger input events using base class helper\n      this._dispatchEvents(editorElement, ['input', 'change']);\n\n      this.logger.info(`[${this.platformId}] Successfully inserted text into Gemini editor.`);\n      return true;\n    } catch (error) {\n      this.logger.error(`[${this.platformId}] Error inserting text into Gemini editor:`, error);\n      return false;\n    }\n  }\n\n  /**\n   * Override: Click Gemini's submit button, ensuring it's enabled and using event sequence.\n   * @param {HTMLElement} buttonElement - The submit button element.\n   * @returns {Promise<boolean>} - True if successful, false otherwise.\n   * @protected\n   */\n  async _clickSubmitButton(buttonElement) {\n    try {\n      this.logger.info(`[${this.platformId}] Attempting to click submit button`);\n      // Check and potentially remove disabled state\n      if (buttonElement.disabled || buttonElement.getAttribute('aria-disabled') === 'true') {\n        this.logger.warn(`[${this.platformId}] Submit button is disabled, attempting to enable.`);\n        if (buttonElement.hasAttribute('disabled')) {\n            buttonElement.disabled = false;\n        }\n        if (buttonElement.hasAttribute('aria-disabled')) {\n            buttonElement.removeAttribute('aria-disabled');\n        }\n        // Re-check after attempting to enable\n        if (buttonElement.disabled || buttonElement.getAttribute('aria-disabled') === 'true') {\n            this.logger.error(`[${this.platformId}] Submit button remained disabled.`);\n            return false;\n        }\n      }\n\n      // Click the button with multiple events\n      ['mousedown', 'mouseup', 'click'].forEach(eventType => {\n        const event = new MouseEvent(eventType, {\n          view: window,\n          bubbles: true,\n          cancelable: true,\n          buttons: eventType === 'mousedown' ? 1 : 0 // Set buttons only for mousedown\n        });\n        buttonElement.dispatchEvent(event);\n      });\n\n      this.logger.info(`[${this.platformId}] Successfully clicked submit button.`);\n      return true;\n    } catch (error) {\n      this.logger.error(`[${this.platformId}] Failed to click submit button:`, error);\n      return false;\n    }\n  }\n}\n\nmodule.exports = GeminiPlatform;","// src/platforms/implementations/grok-platform.js\nconst BasePlatform = require('../platform-base');\n\n/**\n * Grok AI platform implementation\n */\nclass GrokPlatform extends BasePlatform {\n  constructor() {\n    super('grok');\n  }\n\n  isCurrentPlatform() {\n    // Keep this simple and reliable\n    return window.location.hostname === 'grok.com';\n  }\n\n  /**\n   * Helper method to determine if an element is visible and interactive\n   * @param {HTMLElement} element - The element to check\n   * @returns {boolean} True if the element is visible and interactive\n   */\n  isVisibleElement(element) {\n    if (!element) return false;\n\n    // Check for explicit hidden attributes or styles\n    if (element.getAttribute('aria-hidden') === 'true' ||\n        element.style.visibility === 'hidden' ||\n        element.style.display === 'none') {\n      this.logger.warn(`[${this.platformId}] Element hidden by attribute/style:`, element);\n      return false;\n    }\n\n    // Check computed styles\n    const style = window.getComputedStyle(element);\n    if (style.display === 'none' || style.visibility === 'hidden' || style.opacity === '0' || style.pointerEvents === 'none') {\n      this.logger.warn(`[${this.platformId}] Element hidden by computed style: display=${style.display}, visibility=${style.visibility}, opacity=${style.opacity}, pointerEvents=${style.pointerEvents}`, element);\n      return false;\n    }\n\n    // Check if element has zero dimensions\n    const rect = element.getBoundingClientRect();\n    if (rect.width === 0 || rect.height === 0) {\n      // Allow zero height for textareas which might start small\n      if (element.tagName !== 'TEXTAREA') {\n        this.logger.warn(`[${this.platformId}] Element has zero dimensions: width=${rect.width}, height=${rect.height}`, element);\n        return false;\n      } else {\n         this.logger.info(`[${this.platformId}] Textarea has zero height, allowing as potentially visible.`);\n      }\n    }\n\n    // Check if element is practically off-screen (adjust threshold as needed)\n    const threshold = 5; // Small pixel threshold\n    if (rect.right < threshold || rect.bottom < threshold || rect.left > (window.innerWidth - threshold) || rect.top > (window.innerHeight - threshold)) {\n       this.logger.warn(`[${this.platformId}] Element is positioned off-screen:`, rect, element);\n       return false;\n    }\n\n    // Check if the element or its parent is hidden via overflow\n    let parent = element.parentElement;\n    while (parent) {\n      const parentStyle = window.getComputedStyle(parent);\n      if (parentStyle.overflow === 'hidden' || parentStyle.overflowX === 'hidden' || parentStyle.overflowY === 'hidden') {\n        const parentRect = parent.getBoundingClientRect();\n        // Check if the element is outside the parent's visible bounds\n        if (rect.top < parentRect.top || rect.bottom > parentRect.bottom || rect.left < parentRect.left || rect.right > parentRect.right) {\n           this.logger.warn(`[${this.platformId}] Element hidden by parent overflow:`, element, parent);\n           // return false; // Be cautious with this check, might be too strict\n        }\n      }\n      if (parent === document.body) break;\n      parent = parent.parentElement;\n    }\n\n\n    return true;\n  }\n\n\n  /**\n   * Find the active Grok editor element using more robust strategies.\n   * @returns {HTMLElement|null} The editor element or null if not found\n   */\n  findEditorElement() {\n    this.logger.info(`[${this.platformId}] Attempting to find editor element...`);\n\n    // --- Strategy 1: Query Bar Parent + Attributes ---\n    try {\n      const queryBar = document.querySelector('div.query-bar'); // Find the main input container\n      if (queryBar) {\n        // More specific check first\n        const editor = queryBar.querySelector('textarea[dir=\"auto\"][style*=\"resize: none\"]');\n        if (editor && this.isVisibleElement(editor)) {\n          this.logger.info(`[${this.platformId}] Found editor using Strategy 1a (Query Bar + Attributes)`);\n          return editor;\n        }\n         // Simpler version within query bar if the style one fails\n        const simplerEditor = queryBar.querySelector('textarea[dir=\"auto\"]');\n         if (simplerEditor && this.isVisibleElement(simplerEditor)) {\n          this.logger.info(`[${this.platformId}] Found editor using Strategy 1b (Query Bar + dir=auto)`);\n          return simplerEditor;\n        }\n      } else {\n        this.logger.warn(`[${this.platformId}] Strategy 1: Query Bar container not found.`);\n      }\n    } catch (e) { this.logger.warn(`[${this.platformId}] Error during Strategy 1 editor search:`, e); }\n\n\n    // --- Strategy 2: Attributes Only ---\n    try {\n      const textareas = document.querySelectorAll('textarea[dir=\"auto\"][style*=\"resize: none\"]');\n      for (const editor of textareas) {\n        if (this.isVisibleElement(editor)) {\n          this.logger.info(`[${this.platformId}] Found editor using Strategy 2 (Attributes Only)`);\n          return editor;\n        }\n      }\n    } catch (e) { this.logger.warn(`[${this.platformId}] Error during Strategy 2 editor search:`, e); }\n\n    // --- Strategy 3: Broader dir=auto ---\n    try {\n       const textareasDirAuto = document.querySelectorAll('textarea[dir=\"auto\"]');\n       for (const editor of textareasDirAuto) {\n         if (this.isVisibleElement(editor)) {\n           this.logger.info(`[${this.platformId}] Found editor using Strategy 3 (Broader dir=auto)`);\n           return editor;\n         }\n       }\n    } catch (e) { this.logger.warn(`[${this.platformId}] Error during Strategy 3 editor search:`, e); }\n\n    // --- Strategy 4: Fallback using aria-label ---\n    try {\n        const ariaLabelSelector = 'textarea[aria-label*=\"Ask Grok\"], textarea[aria-label*=\"Demander\"]'; // Match English/French\n        const editor = document.querySelector(ariaLabelSelector);\n        if (editor && this.isVisibleElement(editor)) {\n            this.logger.info(`[${this.platformId}] Found editor using Strategy 4 (Aria Label)`);\n            return editor;\n        }\n    } catch (e) { this.logger.warn(`[${this.platformId}] Error during Strategy 4 editor search:`, e); }\n\n\n    this.logger.error(`[${this.platformId}] Editor element not found using any strategy.`);\n    return null;\n  }\n\n  /**\n   * Find the Grok submit button using more robust strategies.\n   * @returns {HTMLElement|null} The submit button or null if not found\n   */\n  findSubmitButton() {\n     this.logger.info(`[${this.platformId}] Attempting to find submit button...`);\n\n    // --- Strategy 1: Specific SVG Path ---\n    try {\n        // Look for the button containing the specific SVG path for the send arrow\n        const svgPathSelector = 'button[type=\"submit\"] svg path[d^=\"M5 11L12 4\"]';\n        const pathElement = document.querySelector(svgPathSelector);\n        if (pathElement) {\n            const button = pathElement.closest('button[type=\"submit\"]');\n            // Check visibility *and* ensure it's not disabled\n            if (button && this.isVisibleElement(button) && !button.disabled && button.getAttribute('aria-disabled') !== 'true') {\n                this.logger.info(`[${this.platformId}] Found submit button using Strategy 1 (SVG Path)`);\n                return button;\n            } else if (button) {\n                 this.logger.warn(`[${this.platformId}] Strategy 1: Found button via SVG, but it's hidden or disabled.`, button);\n            }\n        }\n    } catch (e) { this.logger.warn(`[${this.platformId}] Error during Strategy 1 submit button search:`, e); }\n\n\n    // --- Strategy 2: Structural Position ---\n    // Look for the button within the absolute positioned bottom bar, in the ml-auto container\n    try {\n        const bottomBarSelector = 'form div[class*=\"absolute inset-x-0 bottom-0\"]'; // Anchor within the form\n        const bottomBar = document.querySelector(bottomBarSelector);\n        if (bottomBar) {\n            // Look for the button within the right-aligned container\n            const submitButton = bottomBar.querySelector('div[class*=\"ml-auto\"] button[type=\"submit\"]');\n             // Check visibility *and* ensure it's not disabled\n            if (submitButton && this.isVisibleElement(submitButton) && !submitButton.disabled && submitButton.getAttribute('aria-disabled') !== 'true') {\n                this.logger.info(`[${this.platformId}] Found submit button using Strategy 2 (Structural Position)`);\n                return submitButton;\n            } else if (submitButton) {\n                 this.logger.warn(`[${this.platformId}] Strategy 2: Found button via structure, but it's hidden or disabled.`, submitButton);\n            }\n        } else {\n           this.logger.warn(`[${this.platformId}] Strategy 2: Bottom action bar not found.`);\n        }\n    } catch (e) { this.logger.warn(`[${this.platformId}] Error during Strategy 2 submit button search:`, e); }\n\n\n    // --- Strategy 3: Aria Label (Fallback) ---\n    try {\n        const ariaSelectors = [\n            'button[type=\"submit\"][aria-label*=\"Submit\"]', // English\n            'button[type=\"submit\"][aria-label*=\"Soumettre\"]' // French\n            // Add other languages if necessary\n        ];\n        for (const selector of ariaSelectors) {\n            const button = document.querySelector(selector);\n             // Check visibility *and* ensure it's not disabled\n            if (button && this.isVisibleElement(button) && !button.disabled && button.getAttribute('aria-disabled') !== 'true') {\n                this.logger.info(`[${this.platformId}] Found submit button using Strategy 3 (Aria Label: ${selector})`);\n                return button;\n            } else if (button) {\n                 this.logger.warn(`[${this.platformId}] Strategy 3: Found button via aria-label (${selector}), but it's hidden or disabled.`, button);\n            }\n        }\n    } catch (e) { this.logger.warn(`[${this.platformId}] Error during Strategy 3 submit button search:`, e); }\n\n\n    this.logger.error(`[${this.platformId}] Submit button not found using any strategy.`);\n    return null;\n  }\n}\n\nmodule.exports = GrokPlatform;","const BasePlatform = require('../platform-base');\n\nclass MistralPlatform extends BasePlatform {\n  constructor() {\n    super('mistral');\n  }\n\n  isCurrentPlatform() {\n    return window.location.hostname === 'chat.mistral.ai';\n  }\n\n  findEditorElement() {\n    // Updated selector based on actual textarea attributes\n    return document.querySelector('textarea[name=\"message.text\"][placeholder*=\"Demander au Chat\"]') || // French placeholder\n           document.querySelector('textarea[name=\"message.text\"][placeholder*=\"Ask the Chat\"]') || // English placeholder\n           document.querySelector('textarea.border-default.ring-offset-background'); // Fallback\n  }\n\n  findSubmitButton() {\n    // More specific selector including aria-label and class structure\n    return document.querySelector('button[aria-label*=\"Send question\"][class*=\"bg-inverted\"]'); // Match partial class\n  }\n\n  /**\n   * Override: Insert text into Mistral's editor using specific event sequence.\n   * @param {HTMLElement} editorElement - The editor element (textarea).\n   * @param {string} text - The text to insert.\n   * @returns {Promise<boolean>} - True if successful, false otherwise.\n   * @protected\n   */\n  async _insertTextIntoEditor(editorElement, text) {\n    try {\n      this.logger.info(`[${this.platformId}] Inserting text into Mistral editor with specific events`);\n      // Focus first to ensure proper state\n      editorElement.focus();\n\n      // Set value directly\n      editorElement.value = text;\n\n      // Trigger comprehensive set of events to ensure React state updates\n      // Use base helper for standard events\n      this._dispatchEvents(editorElement, ['input', 'change']);\n\n      this.logger.info(`[${this.platformId}] Successfully inserted text into Mistral editor.`);\n      return true;\n    } catch (error) {\n      this.logger.error(`[${this.platformId}] Error inserting text into Mistral editor:`, error);\n      return false;\n    }\n  }\n\n  /**\n   * Override: Click Mistral's submit button, ensuring it's enabled and using event sequence.\n   * @param {HTMLElement} buttonElement - The submit button element.\n   * @returns {Promise<boolean>} - True if successful, false otherwise.\n   * @protected\n   */\n  async _clickSubmitButton(buttonElement) {\n    try {\n      this.logger.info(`[${this.platformId}] Attempting to click submit button`);\n      // Remove disabled attribute if present\n      if (buttonElement.disabled) {\n        this.logger.warn(`[${this.platformId}] Submit button is disabled, attempting to enable.`);\n        buttonElement.removeAttribute('disabled');\n        // Re-check after attempting to enable\n        if (buttonElement.disabled) {\n            this.logger.error(`[${this.platformId}] Submit button remained disabled.`);\n            return false;\n        }\n      }\n       // Also check aria-disabled just in case\n      if (buttonElement.getAttribute('aria-disabled') === 'true') {\n         this.logger.warn(`[${this.platformId}] Submit button is aria-disabled.`);\n      }\n\n\n      // Create full click simulation\n      ['mousedown', 'mouseup', 'click'].forEach(eventType => {\n        const event = new MouseEvent(eventType, {\n          view: window,\n          bubbles: true,\n          cancelable: true,\n          buttons: eventType === 'mousedown' ? 1 : 0 // Set buttons only for mousedown\n        });\n        buttonElement.dispatchEvent(event);\n      });\n\n      this.logger.info(`[${this.platformId}] Successfully clicked submit button.`);\n      return true;\n    } catch (error) {\n      this.logger.error(`[${this.platformId}] Failed to click submit button:`, error);\n      return false;\n    }\n  }\n}\n\nmodule.exports = MistralPlatform;","// src/platforms/platform-base.js\nconst PlatformInterface = require('./platform-interface');\nconst STORAGE_KEYS = require('../shared/constants').STORAGE_KEYS;\nconst logger = require('../shared/logger').platform;\nconst { robustSendMessage } = require('../shared/utils/message-utils');\n\n/**\n * Base implementation with shared functionality for all AI platforms\n */\nclass BasePlatform extends PlatformInterface {\n  /**\n   * @param {string} platformId - Unique identifier for the platform\n   */\n  constructor(platformId) {\n    super();\n    this.platformId = platformId;\n    this.logger = logger;\n    this.maxRetries = 20;\n    this.processingStarted = false;\n  }\n\n\n  /**\n   * Initialize the platform integration\n   * @returns {Promise<void>}\n   */\n  async initialize() {\n    if (!this.isCurrentPlatform()) {\n      this.logger.info(`[${this.platformId}] Not on platform, exiting`);\n      return;\n    }\n\n    this.logger.info(`[${this.platformId}] Initializing platform integration`);\n\n    if (document.readyState === 'complete') {\n      this.observeForEditor();\n    } else {\n      window.addEventListener('load', () => {\n        this.observeForEditor();\n      });\n    }\n  }\n\n  /**\n   * Use MutationObserver to wait for editor element to be available\n   */\n  observeForEditor() {\n    const observerConfig = { childList: true, subtree: true };\n    let retryCount = 0;\n\n    const observer = new MutationObserver(() => {\n      const editorElement = this.findEditorElement();\n\n      if (editorElement && !this.processingStarted) {\n        this.logger.info(`[${this.platformId}] Interface ready, starting processing`);\n        this.processingStarted = true;\n        observer.disconnect();\n        this.processContent();\n      } else {\n        retryCount++;\n        if (retryCount >= this.maxRetries) {\n          observer.disconnect();\n          this.logger.error(`[${this.platformId}] Failed to find interface elements after maximum retries`);\n          robustSendMessage({\n            action: 'notifyError',\n            error: `Could not interact with ${this.platformId} interface. The page may still be loading or the interface may have changed.`\n          }).catch(err => this.logger.error('Failed to send notifyError message:', err));\n        }\n      }\n    });\n\n    observer.observe(document.body, observerConfig);\n  }\n\n  /**\n   * Utility method to pause execution.\n   * @param {number} ms - Milliseconds to wait.\n   * @returns {Promise<void>}\n   * @protected\n   */\n  async _wait(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  /**\n   * Utility method to dispatch events on an element.\n   * @param {HTMLElement} element - The target element.\n   * @param {string[]} eventTypes - Array of event names (e.g., ['input', 'change']).\n   * @protected\n   */\n  _dispatchEvents(element, eventTypes) {\n    eventTypes.forEach(eventType => {\n      const event = new Event(eventType, { bubbles: true, cancelable: true });\n      element.dispatchEvent(event);\n    });\n  }\n\n  /**\n   * Default implementation for inserting text into an editor element.\n   * Subclasses should override this if the platform uses a non-standard input (e.g., contenteditable div).\n   * @param {HTMLElement} editorElement - The editor element.\n   * @param {string} text - The text to insert.\n   * @returns {Promise<boolean>} - True if successful, false otherwise.\n   * @protected\n   */\n  async _insertTextIntoEditor(editorElement, text) {\n    try {\n      this.logger.info(`[${this.platformId}] Inserting text into standard input/textarea`);\n      editorElement.focus();\n      editorElement.value = text;\n      this._dispatchEvents(editorElement, ['input', 'change']);\n      this.logger.info(`[${this.platformId}] Successfully inserted text into editor.`);\n      return true;\n    } catch (error) {\n      this.logger.error(`[${this.platformId}] Failed to insert text into editor:`, error);\n      return false;\n    }\n  }\n\n  /**\n   * Default implementation for clicking the submit button.\n   * Subclasses should override this if the platform requires a non-standard click simulation.\n   * @param {HTMLElement} buttonElement - The submit button element.\n   * @returns {Promise<boolean>} - True if successful, false otherwise.\n   * @protected\n   */\n  async _clickSubmitButton(buttonElement) {\n    try {\n      this.logger.info(`[${this.platformId}] Attempting to click submit button`);\n      if (buttonElement.disabled || buttonElement.getAttribute('aria-disabled') === 'true') {\n        this.logger.warn(`[${this.platformId}] Submit button is disabled.`);\n        return false;\n      }\n      buttonElement.click();\n      this.logger.info(`[${this.platformId}] Successfully clicked submit button.`);\n      return true;\n    } catch (error) {\n      this.logger.error(`[${this.platformId}] Failed to click submit button:`, error);\n      return false;\n    }\n  }\n\n  /**\n   * Template Method: Process content from storage, find elements, insert, and submit.\n   */\n  async processContent() {\n    this.logger.info(`[${this.platformId}] Starting template method processContent`);\n    chrome.storage.local.get(\n      [STORAGE_KEYS.PRE_PROMPT, STORAGE_KEYS.FORMATTED_CONTENT_FOR_INJECTION],\n      async (result) => {\n        try {\n          this.logger.info(`[${this.platformId}] Retrieved data from storage`, {\n            hasPrompt: !!result[STORAGE_KEYS.PRE_PROMPT],\n            hasFormattedContent: !!result[STORAGE_KEYS.FORMATTED_CONTENT_FOR_INJECTION]\n          });\n\n          const prePrompt = result[STORAGE_KEYS.PRE_PROMPT];\n          const formattedContentString = result[STORAGE_KEYS.FORMATTED_CONTENT_FOR_INJECTION];\n\n          if (!prePrompt) {\n            throw new Error('Missing prompt data in storage');\n          }\n          if (!formattedContentString) {\n            throw new Error('Missing formatted content data in storage');\n          }\n\n          const fullText = this.createStructuredPrompt(prePrompt, formattedContentString);\n          this.logger.info(`[${this.platformId}] Combined prompt and content`);\n\n          // --- Template Method Steps ---\n          // 1. Find Editor\n          const editorElement = this.findEditorElement();\n          if (!editorElement) {\n            this.logger.error(`[${this.platformId}] Editor element not found.`);\n            throw new Error(`Could not find the editor element on ${this.platformId}.`);\n          }\n          this.logger.info(`[${this.platformId}] Found editor element.`);\n\n          // 2. Insert Text\n          const insertSuccess = await this._insertTextIntoEditor(editorElement, fullText);\n          if (!insertSuccess) {\n            this.logger.error(`[${this.platformId}] Failed to insert text using _insertTextIntoEditor.`);\n            throw new Error(`Failed to insert text into the ${this.platformId} editor.`);\n          }\n          this.logger.info(`[${this.platformId}] Text insertion step completed.`);\n\n          // 3. Wait\n          await this._wait(800); // Allow time for UI updates or checks\n          this.logger.info(`[${this.platformId}] Wait step completed.`);\n\n          // 4. Find Submit Button\n          const submitButton = this.findSubmitButton();\n          if (!submitButton) {\n            this.logger.error(`[${this.platformId}] Submit button not found.`);\n            throw new Error(`Could not find the submit button on ${this.platformId}.`);\n          }\n          this.logger.info(`[${this.platformId}] Found submit button.`);\n\n          // 5. Click Submit Button\n          const clickSuccess = await this._clickSubmitButton(submitButton);\n          if (!clickSuccess) {\n            this.logger.error(`[${this.platformId}] Failed to click submit button using _clickSubmitButton.`);\n            throw new Error(`Failed to click the submit button on ${this.platformId}.`);\n          }\n          this.logger.info(`[${this.platformId}] Submit button click step completed.`);\n          // --- End Template Method Steps ---\n\n          this.logger.info(`[${this.platformId}] Content successfully processed and submitted`);\n          // Clear the data after successful processing\n          chrome.storage.local.remove([\n            STORAGE_KEYS.FORMATTED_CONTENT_FOR_INJECTION,\n            STORAGE_KEYS.PRE_PROMPT,\n            STORAGE_KEYS.CONTENT_READY\n          ]);\n\n        } catch (error) {\n          this.logger.error(`[${this.platformId}] Error during processContent execution:`, error);\n          robustSendMessage({\n            action: 'notifyError',\n            error: `Error interacting with ${this.platformId}: ${error.message}`\n          }).catch(err => this.logger.error('Failed to send notifyError message:', err));\n          // Optionally clear storage even on error? Depends on desired retry behavior.\n          // chrome.storage.local.remove([STORAGE_KEYS.FORMATTED_CONTENT_FOR_INJECTION, STORAGE_KEYS.PRE_PROMPT, STORAGE_KEYS.CONTENT_READY]);\n        }\n      }\n    );\n  }\n\n  /**\n   * Create a structured prompt combining instructions and formatted content\n   * @param {string} prePrompt - The pre-prompt instructions\n   * @param {string} formattedContent - The formatted content\n   * @returns {string} The full structured prompt\n   */\n  createStructuredPrompt(prePrompt, formattedContent) {\n    // Use a simple structural approach that preserves the entire prePrompt\n    return `# INSTRUCTION\n${prePrompt}\n# EXTRACTED CONTENT\n${formattedContent}`\n  }\n}\n\nmodule.exports = BasePlatform;\n","// src/platforms/platform-factory.js\nconst ClaudePlatform = require('./implementations/claude-platform');\nconst ChatGptPlatform = require('./implementations/chatgpt-platform');\nconst DeepSeekPlatform = require('./implementations/deepseek-platform');\nconst MistralPlatform = require('./implementations/mistral-platform');\nconst GeminiPlatform = require('./implementations/gemini-platform');\nconst GrokPlatform = require('./implementations/grok-platform');\n\n/**\n * Factory to create the appropriate platform implementation\n */\nclass PlatformFactory {\n  /**\n   * Create the appropriate platform for the current page\n   * @returns {BasePlatform|null} The platform instance or null if no platform matches\n   */\n  static createPlatform() {\n    const platforms = [\n      new ClaudePlatform(),\n      new ChatGptPlatform(),\n      new DeepSeekPlatform(),\n      new MistralPlatform(),\n      new GeminiPlatform(),\n      new GrokPlatform()\n    ];\n    \n    // Find the first platform that matches the current URL\n    return platforms.find(platform => platform.isCurrentPlatform()) || null;\n  }\n  \n  /**\n   * Create a platform by ID regardless of current URL\n   * @param {string} platformId - The platform ID to create\n   * @returns {BasePlatform|null} The platform instance or null if platform ID not found\n   */\n  static createPlatformById(platformId) {\n    switch (platformId.toLowerCase()) {\n      case 'claude':\n        return new ClaudePlatform();\n      case 'chatgpt':\n        return new ChatGptPlatform();\n      case 'deepseek':\n        return new DeepSeekPlatform();\n      case 'mistral':\n        return new MistralPlatform();\n      case 'gemini':\n        return new GeminiPlatform();\n      case 'grok':\n        return new GrokPlatform();\n      default:\n        console.error(`Unknown platform ID: ${platformId}`);\n        return null;\n    }\n  }\n}\n\nmodule.exports = PlatformFactory;","// src/platforms/platform-interface.js\n\n/**\n * Interface defining the contract that all AI platform implementations must follow\n */\nclass PlatformInterface {\n  /**\n   * Check if the current page is the target platform\n   * @returns {boolean} True if current page is the target platform\n   */\n  isCurrentPlatform() {\n    throw new Error('isCurrentPlatform must be implemented by subclasses');\n  }\n  \n  /**\n   * Find the editor element for text input\n   * @returns {HTMLElement|null} The editor element or null if not found\n   */\n  findEditorElement() {\n    throw new Error('findEditorElement must be implemented by subclasses');\n  }\n  \n  /**\n   * Find the submit button to send the input\n   * @returns {HTMLElement|null} The submit button or null if not found\n   */\n  findSubmitButton() {\n    throw new Error('findSubmitButton must be implemented by subclasses');\n  }\n  \n  /**\n   * Insert text into the editor and submit it\n   * @param {string} text - The text to insert and submit\n   * @returns {Promise<boolean>} Success status\n   */\n  async insertAndSubmitText(text) {\n    throw new Error('insertAndSubmitText must be implemented by subclasses');\n  }\n  \n  /**\n   * Initialize the platform integration\n   * @returns {Promise<void>}\n   */\n  async initialize() {\n    throw new Error('initialize must be implemented by subclasses');\n  }\n}\n\nmodule.exports = PlatformInterface;","// src/shared/constants.js\n\n/**\n * Content types used throughout the extension\n */\nexport const CONTENT_TYPES = {\n  GENERAL: 'general',\n  REDDIT: 'reddit',\n  YOUTUBE: 'youtube',\n  PDF: 'pdf'\n};\n\n/**\n * Shared prompt type - accessible across all content types\n */\nexport const SHARED_TYPE = 'shared';\n\n/**\n * User-friendly labels for content types\n */\nexport const CONTENT_TYPE_LABELS = {\n  [CONTENT_TYPES.GENERAL]: 'Web Content',\n  [CONTENT_TYPES.REDDIT]: 'Reddit Post',\n  [CONTENT_TYPES.YOUTUBE]: 'YouTube Video',\n  [CONTENT_TYPES.PDF]: 'PDF Document',\n  [SHARED_TYPE]: 'Shared Prompts'\n};\n\n/**\n * AI platforms supported by the extension\n */\nexport const AI_PLATFORMS = {\n  CLAUDE: 'claude',\n  CHATGPT: 'chatgpt',\n  DEEPSEEK: 'deepseek',\n  MISTRAL: 'mistral',\n  GEMINI: 'gemini',\n  GROK: 'grok'\n};\n\n/**\n * Storage keys used throughout the extension\n */\nexport const STORAGE_KEYS = {\n  // Content\n  CONTENT_READY: 'contentReady',\n  EXTRACTED_CONTENT: 'extractedContent',\n  SCRIPT_INJECTED: 'scriptInjected',\n  TAB_FORMATTED_CONTENT: 'tab_formatted_content',\n  FORMATTED_CONTENT_FOR_INJECTION: 'formatted_content_for_injection',\n\n  // Service\n  THEME_PREFERENCE: 'theme_preference',\n  TEXT_SIZE_PREFERENCE: 'text_size_preference',\n  API_ADVANCED_SETTINGS: 'api_advanced_settings',\n  API_CREDENTIALS: 'api_credentials',\n\n  // Prompt\n  PRE_PROMPT: 'prePrompt',\n  CUSTOM_PROMPTS: 'custom_prompts_by_type',\n  DEFAULT_PROMPTS_INIT_FLAG: 'default_prompts_initialized_v1',\n\n  // Platform\n  INJECTION_PLATFORM: 'injectionPlatform',\n  INJECTION_PLATFORM_TAB_ID: 'injectionPlatformTabId',\n  POPUP_PLATFORM: 'popup_platform',\n  SIDEBAR_PLATFORM: 'sidebar_platform_preference',\n  SIDEBAR_MODEL: 'sidebar_model_preferences',\n  TAB_PLATFORM_PREFERENCES: 'tab_platform_preferences',\n  TAB_MODEL_PREFERENCES: 'tab_model_preferences',\n  TAB_SIDEBAR_STATES: 'tab_sidebar_states',\n  \n  // API\n  API_PROCESSING_STATUS: 'apiProcessingStatus',\n  API_RESPONSE: 'apiResponse',\n  API_PROCESSING_ERROR: 'apiProcessingError',\n  API_RESPONSE_TIMESTAMP: 'apiResponseTimestamp',\n  STREAM_ID: 'streamId',\n  \n  // Sidebar\n  TAB_CHAT_HISTORIES: 'tab_chat_histories',\n  TAB_SYSTEM_PROMPTS: 'tab_system_prompts',\n  TAB_TOKEN_STATISTICS: 'tab_token_statistics',\n};\n\n/**\n * Interface sources for API requests\n */\nexport const INTERFACE_SOURCES = {\n  POPUP: 'popup',\n  SIDEBAR: 'sidebar'\n};\n\n/**\n * Prompt types\n */\nexport const PROMPT_TYPES = {\n  CUSTOM: 'custom',\n  QUICK: 'quick'\n};\n\n/**\n * Sidepanel message types\n */\nexport const MESSAGE_ROLES = {\n  USER: 'user',\n  ASSISTANT: 'assistant',\n  SYSTEM: 'system'\n}","// src/shared/logger.js\n\n/**\n * Cross-context logging utility for Chrome extensions\n * Console-only implementation with backward compatibility\n */\n\n// Determine if running in production mode (set by Webpack's mode option)\nconst isProduction = process.env.NODE_ENV === 'production';\n\n/**\n * Log a message to console, conditionally skipping 'info' logs in production.\n * @param {string} context - The context (background, content, popup, etc.)\n * @param {string} level - Log level (info, warn, error)\n * @param {string} message - The message to log\n * @param {any} [data=null] - Optional data to include\n */\nfunction log(context, level, message, data = null) {\n  // --- Production Log Filtering ---\n  // Skip 'info' level logs when in production mode\n  if (isProduction && level === 'info') {\n    return; // Exit early, do not log\n  }\n  // -----------------------------\n\n  // Map level to console method\n  const consoleMethod = level === 'error' ? 'error' : level === 'warn' ? 'warn' : 'log'; // Default to 'log' for 'info'\n\n  // Format prefix with context\n  const prefix = `[${context}]`;\n\n  // Log to console with or without data\n  if (data !== null) {\n    console[consoleMethod](prefix, message, data);\n  } else {\n    console[consoleMethod](prefix, message);\n  }\n}\n\n/**\n * Stub function for backward compatibility\n * Returns empty array since we're not storing logs\n * @returns {Promise<Array>} Empty array\n */\nasync function getLogs() {\n  // Log this message even in production, as it's informational about the logger itself\n  console.log('[Logger] getLogs called - logs are not being stored in this version');\n  return [];\n}\n\n/**\n * Stub function for backward compatibility\n */\nasync function clearLogs() {\n  // Log this message even in production\n  console.log('[Logger] clearLogs called - logs are not being stored in this version');\n}\n\nconst logger = {\n  api: {\n    debug: (message, data) => log('api', 'debug', message, data),\n    info: (message, data) => log('api', 'info', message, data),\n    warn: (message, data) => log('api', 'warn', message, data),\n    error: (message, data) => log('api', 'error', message, data)\n  },\n  background: {\n    debug: (message, data) => log('background', 'debug', message, data),\n    info: (message, data) => log('background', 'info', message, data),\n    warn: (message, data) => log('background', 'warn', message, data),\n    error: (message, data) => log('background', 'error', message, data)\n  },\n  content: {\n    debug: (message, data) => log('content', 'debug', message, data),\n    info: (message, data) => log('content', 'info', message, data),\n    warn: (message, data) => log('content', 'warn', message, data),\n    error: (message, data) => log('content', 'error', message, data)\n  },\n  extractor: {\n    debug: (message, data) => log('extractor', 'debug', message, data),\n    info: (message, data) => log('extractor', 'info', message, data),\n    warn: (message, data) => log('extractor', 'warn', message, data),\n    error: (message, data) => log('extractor', 'error', message, data)\n  },\n  popup: {\n    debug: (message, data) => log('popup', 'debug', message, data),\n    info: (message, data) => log('popup', 'info', message, data),\n    warn: (message, data) => log('popup', 'warn', message, data),\n    error: (message, data) => log('popup', 'error', message, data)\n  },\n  platform: {\n    debug: (message, data) => log('platform', 'debug', message, data),\n    info: (message, data) => log('platform', 'info', message, data),\n    warn: (message, data) => log('platform', 'warn', message, data),\n    error: (message, data) => log('platform', 'error', message, data)\n  },\n  message:{\n    debug: (message, data) => log('message', 'debug', message, data),\n    info: (message, data) => log('message', 'info', message, data),\n    warn: (message, data) => log('message', 'warn', message, data),\n    error: (message, data) => log('message', 'error', message, data)\n  },\n  service: {\n    debug: (message, data) => log('service', 'debug', message, data),\n    info: (message, data) => log('service', 'info', message, data),\n    warn: (message, data) => log('service', 'warn', message, data),\n    error: (message, data) => log('service', 'error', message, data)\n  },\n  sidebar: {\n    debug: (message, data) => log('sidebar', 'debug', message, data),\n    info: (message, data) => log('sidebar', 'info', message, data),\n    warn: (message, data) => log('sidebar', 'warn', message, data),\n    error: (message, data) => log('sidebar', 'error', message, data)\n  },\n  getLogs,\n  clearLogs\n};\n\nmodule.exports = logger;","// src/shared/utils/message-utils.js\nimport logger from '../logger';\n\nconst RETRY_DELAY = 250;\n\n/**\n * Sends a message to the background script, handling potential connection errors\n * and performing a single retry if the Service Worker was inactive.\n * @param {object} message - The message object to send. Must include an 'action' property.\n * @param {number} [retries=1] - Maximum number of retries allowed (default is 1 retry).\n * @returns {Promise<any>} A promise that resolves with the response or rejects with an error.\n */\nexport async function robustSendMessage(message, retries = 1) {\n  if (!message || typeof message.action !== 'string') {\n    logger.message.error('robustSendMessage: Invalid message object. \"action\" property is required.', message);\n    return Promise.reject(new Error('Invalid message object passed to robustSendMessage'));\n  }\n\n  return new Promise((resolve, reject) => {\n    // Ensure chrome API is available\n    if (typeof chrome === 'undefined' || !chrome.runtime || !chrome.runtime.sendMessage) {\n      logger.message.error('robustSendMessage: Chrome runtime API is not available.');\n      return reject(new Error('Chrome runtime API not available'));\n    }\n\n    logger.message.info(`robustSendMessage: Sending action \"${message.action}\"...`);\n    chrome.runtime.sendMessage(message, (response) => {\n      const lastError = chrome.runtime.lastError;\n      if (lastError) {\n        // Check if it's a connection error and retries are left\n        const isConnectionError = lastError.message?.includes('Receiving end does not exist') ||\n                                  lastError.message?.includes('Could not establish connection');\n\n        if (retries > 0 && isConnectionError) {\n          logger.message.warn(`robustSendMessage: Connection error for action \"${message.action}\". Retrying in ${RETRY_DELAY}ms... (Retries left: ${retries - 1})`);\n          setTimeout(() => {\n            robustSendMessage(message, retries - 1) // Recursive call with decremented retries\n              .then(resolve)\n              .catch(reject);\n          }, RETRY_DELAY);\n        } else {\n          // Not a retryable error or retries exhausted\n          logger.message.error(`robustSendMessage: Unrecoverable error for action \"${message.action}\":`, { message: lastError.message });\n          reject(new Error(lastError.message || 'Unknown runtime error'));\n        }\n      } else {\n        // Success\n        logger.message.info(`robustSendMessage: Received response for action \"${message.action}\".`);\n        resolve(response);\n      }\n    });\n  });\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// src/content/platform-content.js\nconst PlatformFactory = require('../platforms/platform-factory');\n\n/**\n * Entry point for platform integration\n * This is the content script that will be injected into the AI platform pages\n */\n(async () => {\n  try {\n    // Create the appropriate platform for the current page\n    const platform = PlatformFactory.createPlatform();\n    \n    if (platform) {\n      // Initialize the platform\n      await platform.initialize();\n    } else {\n      console.warn('No matching AI platform found for the current page');\n    }\n  } catch (error) {\n    console.error('Error initializing AI platform integration:', error);\n  }\n})();"],"names":["BasePlatform","require","ChatGptPlatform","constructor","isCurrentPlatform","window","location","href","includes","findEditorElement","logger","info","platformId","editor","document","querySelector","warn","findSubmitButton","button","ariaSelector","error","_insertTextIntoEditor","editorElement","text","focus","innerHTML","lines","split","forEach","line","p","createElement","textContent","appendChild","_dispatchEvents","_clickSubmitButton","buttonElement","disabled","getAttribute","eventType","event","MouseEvent","view","bubbles","cancelable","buttons","dispatchEvent","module","exports","ClaudePlatform","isVisibleElement","element","style","getComputedStyle","rect","getBoundingClientRect","display","visibility","opacity","width","height","wrapper","e","placeholderParagraph","closest","editors","querySelectorAll","isVisible","debug","_isButtonEnabled","isDisabled","selector","svgElement","isHidden","index","classList","remove","focusError","hasAttribute","DeepSeekPlatform","sendButton","insertAndSubmitText","value","inputEvent","Event","Promise","resolve","setTimeout","length","updatedButton","click","GeminiPlatform","hostname","paragraphs","paragraph","trim","contains","removeAttribute","GrokPlatform","pointerEvents","tagName","threshold","right","bottom","left","innerWidth","top","innerHeight","parent","parentElement","parentStyle","overflow","overflowX","overflowY","parentRect","body","queryBar","simplerEditor","textareas","textareasDirAuto","ariaLabelSelector","svgPathSelector","pathElement","bottomBarSelector","bottomBar","submitButton","ariaSelectors","MistralPlatform","PlatformInterface","STORAGE_KEYS","platform","robustSendMessage","maxRetries","processingStarted","initialize","readyState","observeForEditor","addEventListener","observerConfig","childList","subtree","retryCount","observer","MutationObserver","disconnect","processContent","action","catch","err","observe","_wait","ms","eventTypes","chrome","storage","local","get","PRE_PROMPT","FORMATTED_CONTENT_FOR_INJECTION","result","hasPrompt","hasFormattedContent","prePrompt","formattedContentString","Error","fullText","createStructuredPrompt","insertSuccess","clickSuccess","CONTENT_READY","message","formattedContent","PlatformFactory","createPlatform","platforms","find","createPlatformById","toLowerCase","console","CONTENT_TYPES","GENERAL","REDDIT","YOUTUBE","PDF","SHARED_TYPE","CONTENT_TYPE_LABELS","AI_PLATFORMS","CLAUDE","CHATGPT","DEEPSEEK","MISTRAL","GEMINI","GROK","EXTRACTED_CONTENT","SCRIPT_INJECTED","TAB_FORMATTED_CONTENT","THEME_PREFERENCE","TEXT_SIZE_PREFERENCE","API_ADVANCED_SETTINGS","API_CREDENTIALS","CUSTOM_PROMPTS","DEFAULT_PROMPTS_INIT_FLAG","INJECTION_PLATFORM","INJECTION_PLATFORM_TAB_ID","POPUP_PLATFORM","SIDEBAR_PLATFORM","SIDEBAR_MODEL","TAB_PLATFORM_PREFERENCES","TAB_MODEL_PREFERENCES","TAB_SIDEBAR_STATES","API_PROCESSING_STATUS","API_RESPONSE","API_PROCESSING_ERROR","API_RESPONSE_TIMESTAMP","STREAM_ID","TAB_CHAT_HISTORIES","TAB_SYSTEM_PROMPTS","TAB_TOKEN_STATISTICS","INTERFACE_SOURCES","POPUP","SIDEBAR","PROMPT_TYPES","CUSTOM","QUICK","MESSAGE_ROLES","USER","ASSISTANT","SYSTEM","isProduction","process","env","NODE_ENV","log","context","level","data","consoleMethod","prefix","getLogs","clearLogs","api","background","content","extractor","popup","service","sidebar","RETRY_DELAY","retries","reject","runtime","sendMessage","response","lastError","isConnectionError","then"],"sourceRoot":""}